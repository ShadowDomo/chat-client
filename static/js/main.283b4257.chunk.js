(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(49),r=n.n(a),o=n(5),i=n(3),l=Object(c.createContext)(null),j=n(1),u=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(o.a)(a,2),u=r[0],m=r[1],b=Object(o.a)(Object(c.useContext)(l).usernames,2),d=(b[0],b[1]),O=Object(o.a)(Object(c.useContext)(l).room,2),x=(O[0],O[1]),h=Object(i.f)();return Object(j.jsxs)("form",{children:[Object(j.jsx)("h1",{children:"Chat room"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"",children:"Username"}),Object(j.jsx)("input",{className:"form-control",type:"text",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group mt-2",children:[Object(j.jsx)("label",{className:"",children:"Room Code"}),Object(j.jsx)("input",{className:"form-control",type:"text",value:u,onChange:function(e){return m(e.target.value)}})]}),Object(j.jsx)("button",{onClick:function(){d(n),x(u),h.push("/room")},className:"btn btn-primary mt-2",children:"Join room"})]})},m=n(19),b=n(24),d=n(51),O=n.n(d),x=n(52),h=function(e){var t=e.message,n=e.userUsername,c=e.prevMessage;return"status"in t?Object(j.jsx)("div",{className:"rounded py-1 px-2 mb-1",children:Object(j.jsx)("div",{className:"d-flex justify-content-center",children:Object(j.jsxs)("small",{className:"",children:[t.username," ",t.status]})})}):function(){var e,s,a,r="justify-content-",o="align-items-";return t.username===n?(r+="end",o+="end",e="bg-primary",s="text-white",a="18px 4px 4px 18px"):(r+="start",o+="start",e="bg-white",s="text-black",a="4px 18px 18px 4px"),Object(j.jsx)("div",{className:"d-flex ".concat(r),children:Object(j.jsxs)("div",{className:"d-flex flex-column ".concat(o),style:{maxWidth:"70%"},"data-tip":new Date(parseInt(t.time)).toLocaleTimeString("en-AU").toString(),children:[Object(j.jsx)(x.a,{}),function(){if(null===c||c.username!==t.username)return Object(j.jsx)("small",{className:"text-secondary",children:t.username})}(),Object(j.jsx)("div",{className:"border border-secondary mt-1 p-2 ".concat(e),style:{borderRadius:a},children:Object(j.jsx)("p",{className:"".concat(s," mb-0 "),children:t.content})})]})})}()},f=(n(92),function(){var e=Object(o.a)(Object(c.useContext)(l).usernames,2),t=e[0],n=(e[1],Object(o.a)(Object(c.useContext)(l).room,2)),s=n[0],a=(n[1],Object(c.useState)([])),r=Object(o.a)(a,2),u=r[0],d=r[1],x=Object(c.useState)(""),f=Object(o.a)(x,2),p=f[0],v=f[1],g=Object(c.useState)(null),N=Object(o.a)(g,2),y=N[0],C=N[1],S=Object(c.useState)([]),w=Object(o.a)(S,2),k=w[0],R=w[1],E=Object(i.f)(),U=Object(c.useRef)(null);function I(e){d((function(t){var n=Object(b.a)(t);return n.push(e),n}))}return Object(c.useEffect)((function(){var e=!0,n=O()("http://chatclient-env.eba-6usxyhmz.ap-southeast-2.elasticbeanstalk.com/");return C(n),""!==t&&""!==s||E.push("/"),e&&(n.emit("joinRoom",{username:t,roomCode:s}),n.on("joinedRoom",(function(e){I(Object(m.a)(Object(m.a)({},e),{},{status:"has joined the room"}))})),n.on("message",(function(e){I(e)})),n.on("disconnected",(function(e){I(Object(m.a)(Object(m.a)({},e),{},{status:"has left the room"}))})),n.on("typingEnded",(function(e){R((function(t){return Object(b.a)(t).filter((function(t){return t!==e.username}))}))})),n.on("typingStarted",(function(e){R((function(t){return t.includes(e.username)?t:[].concat(Object(b.a)(t),[e.username])}))}))),function(){e=!1,n.disconnect()}}),[t,s]),Object(c.useEffect)((function(){U.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(j.jsxs)("div",{className:"d-flex flex-column container overflow-auto",children:[Object(j.jsxs)("h1",{className:"row mt-5",children:["Chat room - ",s]}),Object(j.jsxs)("div",{className:"row overflow-auto",style:{maxHeight:"76vh",marginBottom:"120px"},children:[Object(j.jsx)("div",{className:"col ",children:u.map((function(e,n){return Object(j.jsx)(h,{prevMessage:n>0?u[n-1]:null,message:e,userUsername:t},n)}))}),Object(j.jsx)("div",{ref:U})]}),Object(j.jsxs)("div",{className:"fixed-bottom mb-5 container",children:[Object(j.jsx)("div",{className:"text-center",children:function(){if(0!==k.length)return 1===k.length?Object(j.jsxs)("small",{className:"",children:[k.toString()," is typing..."]}):Object(j.jsxs)("small",{className:"mb-2",children:[k.join(", ")," are typing..."]})}()}),Object(j.jsxs)("form",{className:"form-group d-flex mt-1",children:[Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Type something...",style:{marginRight:"15px"},value:p,onChange:function(e){y.emit("typing",{username:t}),v(e.target.value)}}),Object(j.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:function(e){return function(e){e.preventDefault(),v(""),y.emit("message",{content:p,username:t})}(e)},children:"Submit"})]})]})]})}),p=n(22);var v=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(o.a)(a,2),m=r[0],b=r[1];return Object(j.jsx)("div",{className:"App container",children:Object(j.jsx)(p.a,{children:Object(j.jsx)(l.Provider,{value:{usernames:[n,s],room:[m,b]},children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/room",children:Object(j.jsx)(f,{})}),Object(j.jsx)(i.a,{path:"/",children:Object(j.jsx)(u,{})})]})})})})};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.283b4257.chunk.js.map